<h2 class="mb-3">Sign in</h2>

<!-- Affiche un message d'erreur si error() contient une valeur -->
@if (error()) {
  <p-message severity="danger" [text]="error()!"></p-message>
}

<form [formGroup]="form" (ngSubmit)="submit()" class="form">
  <div class="form-field">
    <label for="email">Email</label>
    <input
      id="email"
      type="email"
      pInputText
      formControlName="email"
      placeholder="john.doe@mail.com"
      autocomplete="username"
    />
    @if (f['email'].touched && f['email'].errors?.['required']) {
      <small class="error">Email is mandatory</small>
    }
    @if (f['email'].touched && f['email'].errors?.['email']) {
      <small class="error">Email format is invalid</small>
    }
  </div>

  <div class="form-field">
    <label for="password">Password</label>
    <input
      id="password"
      type="password"
      pPassword
      formControlName="password"
      [feedback]="false"
      autocomplete="current-password"
      placeholder="Your password"
    />
    @if (f['password'].touched && f['password'].errors?.['required']) {
      <small class="error">Password is mandatory</small>
    }
  </div>

  <p-button
    type="submit"
    label="Sign in"
    [disabled]="form.invalid || loading()"
    [loading]="loading()"
    severity="success"
    class="mt-2"
  ></p-button>
</form>
